@using XCode.Statistics;
@{
    var page = ViewBag.Page as Pager;

    var level = (StatLevels)page["Level"].ToInt();
    var formatStr = "";
    switch (level)
    {
        case StatLevels.Year: formatStr = "yyyy"; break;
        case StatLevels.Month: formatStr = "yyyy-MM"; break;
        case StatLevels.Day: formatStr = "yyyy-MM-dd"; break;
        case StatLevels.Hour: formatStr = "yyyy-MM-dd HH"; break;
        case StatLevels.Minute: formatStr = "yyyy-MM-dd HH:mm"; break;
    }
}
<div class="form-group">
    @Html.ForDropDownList("p", VisitStat.FindAllPageName(), page["p"], "全部页面", true)
</div>
<div class="form-group">
    @Html.ForDropDownList("Level", System.EnumHelper.GetDescriptions(typeof(StatLevels)), page["Level"], null, true)
</div>
<div class="form-group">
    <div class="input-group">
        <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
        <input name="dtEnd" id="dtEnd" value="@page["Time"]" dateformat="@formatStr" class="form-control form_datetime" />
    </div>
</div>